{"version":3,"sources":["models/VoteSource.ts"],"names":[],"mappings":";;AAAA,qCAAqC;AASrC,MAAM,gBAAgB,GAAoB,IAAI,QAAQ,CAAC,MAAM,CAAC;IAC1D,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE;IACpC,OAAO,EAAE,MAAM;IACf,OAAO,EACP,CAAC;YACG,EAAE,EAAE,MAAM;YACV,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;YACjC,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;SAC9B,CAAC;IACF,WAAW,EAAE,MAAM;CACtB,CAAC,CAAC;AAEH,gBAAgB,CAAC,OAAO,CAAC,QAAQ,GAAG,UAAS,WAAmB;IAC5D,MAAM,OAAO,GAAyC,IAAK,CAAC,OAAO,CAAC;IACpE,MAAM,CAAC,OAAO;SACT,MAAM,CAAC,CAAC,IAAc,EAAE,GAAkB,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC;SAC5E,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;AACjD,CAAC,CAAC;AAEN,MAAM,eAAe,GAAG,QAAQ,CAAC,KAAK,CAAqB,YAAY,EAAE,gBAAgB,CAAC,CAAC;AAC3F,kBAAe,eAAe,CAAC","file":"VoteSource.js","sourcesContent":["import * as mongoose from 'mongoose';\r\n\r\nimport VoteChoiceDTO from '../../../shared/VoteChoiceDTO';\r\nimport VoteSourceDTO from '../../../shared/VoteSourceDTO';\r\n\r\nexport interface VoteSourceDocument extends VoteSourceDTO, mongoose.Document {\r\n    hasVoted(phoneNumber: string): boolean;\r\n}\r\n\r\nconst VoteSourceSchema: mongoose.Schema = new mongoose.Schema({\r\n    Name: { type: String, unique: true },\r\n    Enabled: String,\r\n    Choices:\r\n    [{\r\n        Id: String,\r\n        Name: String,\r\n        Order: {type: Number, default: 0},\r\n        Numbers: [{ type: String }]\r\n    }],\r\n    PhoneNumber: String\r\n});\r\n\r\nVoteSourceSchema.methods.hasVoted = function(phoneNumber: string): boolean {\r\n    const choices: VoteChoiceDTO[] = (<VoteSourceDocument>this).Choices;\r\n    return choices\r\n        .reduce((prev: string[], cur: VoteChoiceDTO) => prev.concat(cur.Numbers), [])\r\n        .find(n => n === phoneNumber) ? true : false;\r\n    };\r\n\r\nconst VoteSourceModel = mongoose.model<VoteSourceDocument>('VoteSource', VoteSourceSchema);\r\nexport default VoteSourceModel;"]}