{"version":3,"sources":["models/VoteSource.ts"],"names":[],"mappings":";;AAAA,qCAAqC;AASrC,MAAM,gBAAgB,GAAoB,IAAI,QAAQ,CAAC,MAAM,CAAC;IAC1D,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE;IACpC,OAAO,EAAE,MAAM;IACf,OAAO,EACP,CAAC;YACG,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;YACnC,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;SAC9B,CAAC;IACF,WAAW,EAAE,MAAM;CACtB,CAAC,CAAC;AAEH,gBAAgB,CAAC,OAAO,CAAC,QAAQ,GAAG,UAAS,WAAmB;IAC5D,MAAM,OAAO,GAAyC,IAAK,CAAC,OAAO,CAAC;IACpE,MAAM,CAAC,OAAO;SACT,MAAM,CAAC,CAAC,IAAc,EAAE,GAAkB,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC;SAC5E,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;AACjD,CAAC,CAAC;AAEN,MAAM,eAAe,GAAG,QAAQ,CAAC,KAAK,CAAqB,YAAY,EAAE,gBAAgB,CAAC,CAAC;AAC3F,kBAAe,eAAe,CAAC","file":"VoteSource.js","sourcesContent":["import * as mongoose from 'mongoose';\n\nimport VoteChoiceDTO from '../../../shared/VoteChoiceDTO';\nimport VoteSourceDTO from '../../../shared/VoteSourceDTO';\n\nexport interface VoteSourceDocument extends VoteSourceDTO, mongoose.Document {\n    hasVoted(phoneNumber: string): boolean;\n}\n\nconst VoteSourceSchema: mongoose.Schema = new mongoose.Schema({\n    Name: { type: String, unique: true },\n    Enabled: String,\n    Choices:\n    [{\n        Name: String,\n        VoteKey: {type: Number, default: 0},\n        Numbers: [{ type: String }]\n    }],\n    PhoneNumber: String\n});\n\nVoteSourceSchema.methods.hasVoted = function(phoneNumber: string): boolean {\n    const choices: VoteChoiceDTO[] = (<VoteSourceDocument>this).Choices;\n    return choices\n        .reduce((prev: string[], cur: VoteChoiceDTO) => prev.concat(cur.Numbers), [])\n        .find(n => n === phoneNumber) ? true : false;\n    };\n\nconst VoteSourceModel = mongoose.model<VoteSourceDocument>('VoteSource', VoteSourceSchema);\nexport default VoteSourceModel;"]}